(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const S="#cf3673",L="#748cbb",v=document.querySelector("#title-container"),M=document.querySelector("#game-over");document.querySelector("#game-over-title");const B=document.querySelector("#score"),O=document.querySelector("#lives");let A=0,X=3,d={up:!1,left:!1,right:!1,reset:!1},a=document.querySelector("#my-canvas"),h=a.getContext("2d"),f=[],D=.45,l=[],m="START";for(let t=0;t<7;t++)for(let e=0;e<7;e++){let i=Math.random(),n=i<.333333?S:i<.66666?"#855c8c":L;l.push({startX:25+t*140,startY:25+e*50,width:100,height:20,toDispose:!1,id:t+e,color:n,power:"ball"})}let P=t=>({x:t.startX+t.width*.5,y:t.startY+t.height*.5}),q=()=>{l.forEach(t=>{h.fillStyle=t.color,h.fillRect(t.startX,t.startY,t.width,t.height)})},C=t=>{if(!t.power)return;let e=P(t),i={radius:15,positionX:e.x,positionY:e.y,xDirection:1,yDirection:1,speed:D,color:t.color,life:1,toDispose:!1};f.push(i)},c={startX:a.width*.5-150*.5,startY:a.height-50,width:150,height:20,toDispose:!1,color:L,id:"paddle"};l.push(c);const N=t=>{let e=0;d.left&&(e-=.5*t),d.right&&(e+=.5*t),c.startX=c.startX+e,c.startX<=0&&(c.startX=5),c.startX+c.width>=a.width&&(c.startX=a.width-c.width-5)};let R={radius:15,positionX:a.width/2,positionY:a.width/2,xDirection:0,yDirection:-1,speed:D,color:"white",life:1,toDispose:!1};R.positionY=a.height-80;f.push(R);let I=t=>{f.forEach(e=>T(e,t))},T=(t,e)=>{t.positionX+=t.speed*e*t.xDirection,t.positionY+=t.speed*e*t.yDirection,t.positionY-t.radius<=0&&(t.yDirection=Math.abs(t.yDirection)),t.positionX+t.radius>=a.width&&(t.xDirection=-Math.abs(t.xDirection)),t.positionX-t.radius<=0&&(t.xDirection=Math.abs(t.xDirection)),t.positionY-t.radius>a.height&&(t.toDispose=!0)},_=()=>{f.forEach(t=>F(t))},F=t=>{h.beginPath(),h.arc(t.positionX,t.positionY,t.radius,0,2*Math.PI),h.fillStyle=t.color,h.fill()};const K=()=>{f=f.filter(t=>!t.toDispose)},V=()=>{l.forEach(t=>{f.forEach(e=>{if(G(t,e)){let i=H(t,e);if(i==1&&(e.yDirection=1),i==2&&(e.xDirection=-1),i==3&&(e.xDirection=1),i==4&&(e.yDirection=-1),t.id!="paddle")C(t),t.toDispose=!0,A+=50;else{let n={start:t.startX,end:t.startX+t.width,center:t.startX+t.width*.5},o=e.positionX-n.start,s=n.center-n.start;(o-s)/t.width;let r=(o-s)/t.width;r=Math.max(-.3,r),r=Math.min(.3,r),r*=2,r*=90,r<=0?r+=90:r-=90;let p=r<=0?1:-1,u=Math.abs(r),y=1;const w=u*Math.PI/180,x=y*Math.sin(w),g=y*Math.cos(w);e.xDirection=g*p,e.yDirection=-x}}})})},G=(t,e)=>{let i=P(t),n=i.x,o=i.y,s=e.positionX-n,r=e.positionY-t.startY,p=n+Math.max(Math.min(s,t.width/2),-t.width/2),u=o+Math.max(Math.min(r,t.height/2),-t.height/2);return Math.sqrt((e.positionX-p)**2+(e.positionY-u)**2)<=e.radius},H=(t,e)=>{let i={x:t.startX+t.width*.5,y:t.startY+t.height*.5},n=Math.atan2(i.x-e.positionX,i.y-e.positionY),o={x:t.startX,y:t.startY+t.height},s={x:t.startX+t.width,y:t.startY+t.height},r={x:t.startX,y:t.startY},p={x:t.startX+t.width,y:t.startY},u=Math.atan2(i.x-o.x,i.y-o.y),y=Math.atan2(i.x-s.x,i.y-s.y),w=Math.atan2(i.x-r.x,i.y-r.y),x=Math.atan2(i.x-p.x,i.y-p.y),g=4;return n>u||n<y?g=1:n>w&&n<u?g=2:n>y&&n<x&&(g=3),g};document.addEventListener("keydown",t=>{m==="START"&&(m="PLAYING"),t.code==="ArrowLeft"&&(d.left=!0),t.code==="ArrowRight"&&(d.right=!0),t.code==="ArrowUp"&&(d.up=!0),t.code==="KeyR"&&(d.reset=!0)});document.addEventListener("keyup",t=>{t.code==="ArrowLeft"&&(d.left=!1),t.code==="ArrowRight"&&(d.right=!1),t.code==="ArrowUp"&&(d.up=!1),t.code==="KeyR"&&(d.reset=!1)});const U=()=>{l=l.filter(t=>!t.toDispose)},j=()=>{B.innerHTML=A};let Y=16,E=t=>{const e=t-Y;e&&(h.clearRect(0,0,a.width,a.height),V(),m=="PLAYING"&&(v.style.display="none",N(e),I(e),U(),K(),l.length==1&&(m="OVER",M.style.display="flex"),f.length==0&&(X===0?(m="OVER",M.style.display="flex"):(console.log("removing life "),X-=1,O.innerHTML=X,f.push({radius:15,positionX:a.width/2,positionY:a.width/2,xDirection:0,yDirection:-1,speed:D,color:"white",life:1,toDispose:!1})))),m=="OVER"&&d.reset&&location.reload(),q(),_(),j(),Y=t),requestAnimationFrame(E)};E();
//# sourceMappingURL=index-BzzFwWQO.js.map
