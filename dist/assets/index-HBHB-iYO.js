(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const E="#cf3673",A="#748cbb",B=document.querySelector("#title-container"),T=document.querySelector("#game-over");document.querySelector("#game-over-title");const q=document.querySelector("#score"),O=document.querySelector("#lives"),C=document.querySelector("#level");let L=0,D=3,x=1,c={up:!1,left:!1,right:!1,reset:!1},N=65,d=document.querySelector("#my-canvas"),f=d.getContext("2d"),l=[],Y=.45,p=[],h="START";const v=()=>{for(let t=0;t<5;t++)for(let e=0;e<5;e++){let i=Math.random(),n=i<.333333?E:i<.66666?"#855c8c":A;p.push({startX:25+t*140,startY:N+e*50,width:100,height:30,toDispose:!1,id:t+e,color:n,power:"ball"})}};v();let S=t=>({x:t.startX+t.width*.5,y:t.startY+t.height*.5}),I=()=>{p.forEach(t=>{f.fillStyle=t.color,f.fillRect(t.startX,t.startY,t.width,t.height)})},_=t=>{if(!t.power||x!=1)return;let e=S(t),i={radius:40,positionX:e.x,positionY:e.y,xDirection:1,yDirection:1,speed:Y,color:t.color,life:1,toDispose:!1};l.push(i)},a={startX:d.width*.5-150*.5,startY:d.height-50,width:150,height:20,toDispose:!1,color:A,id:"paddle"};p.push(a);const F=t=>{let e=0;c.left&&(e-=.5*t),c.right&&(e+=.5*t),a.startX=a.startX+e,a.startX<=0&&(a.startX=5),a.startX+a.width>=d.width&&(a.startX=d.width-a.width-5)};let P={radius:15,positionX:d.width/2,positionY:d.width/2,xDirection:0,yDirection:-1,speed:Y,color:"white",life:1,toDispose:!1};P.positionY=d.height-80;l.push(P);let H=t=>{h=="START"?(l[0].positionX=a.startX+a.width*.5,l[0].positionY=a.startY-30):l.forEach(e=>K(e,t))},K=(t,e)=>{t.positionX+=t.speed*e*t.xDirection,t.positionY+=t.speed*e*t.yDirection,t.positionY-t.radius<=0&&(t.yDirection=Math.abs(t.yDirection)),t.positionX+t.radius>=d.width&&(t.xDirection=-Math.abs(t.xDirection)),t.positionX-t.radius<=0&&(t.xDirection=Math.abs(t.xDirection)),t.positionY-t.radius>d.height&&(t.toDispose=!0)},G=()=>{l.forEach(t=>U(t))},U=t=>{f.beginPath(),f.arc(t.positionX,t.positionY,t.radius,0,2*Math.PI),f.fillStyle=t.color,f.fill()};const V=()=>{l=l.filter(t=>!t.toDispose)},j=()=>{p.forEach(t=>{l.forEach(e=>{if(z(t,e)){let i=J(t,e);if(i==1&&(e.yDirection=1),i==2&&(e.xDirection=-1),i==3&&(e.xDirection=1),i==4&&(e.yDirection=-1),t.id!="paddle")_(t),t.toDispose=!0,L+=50;else{let n={start:t.startX,end:t.startX+t.width,center:t.startX+t.width*.5},o=e.positionX-n.start,s=n.center-n.start;(o-s)/t.width;let r=(o-s)/t.width;r=Math.max(-.3,r),r=Math.min(.3,r),r*=2,r*=90,r<=0?r+=90:r-=90;let u=r<=0?1:-1,y=Math.abs(r),g=1;const w=y*Math.PI/180,X=g*Math.sin(w),m=g*Math.cos(w);e.xDirection=m*u,e.yDirection=-X}}})})},z=(t,e)=>{let i=S(t),n=i.x,o=i.y,s=e.positionX-n,r=e.positionY-t.startY,u=n+Math.max(Math.min(s,t.width/2),-t.width/2),y=o+Math.max(Math.min(r,t.height/2),-t.height/2);return Math.sqrt((e.positionX-u)**2+(e.positionY-y)**2)<=e.radius},J=(t,e)=>{let i={x:t.startX+t.width*.5,y:t.startY+t.height*.5},n=Math.atan2(i.x-e.positionX,i.y-e.positionY),o={x:t.startX,y:t.startY+t.height},s={x:t.startX+t.width,y:t.startY+t.height},r={x:t.startX,y:t.startY},u={x:t.startX+t.width,y:t.startY},y=Math.atan2(i.x-o.x,i.y-o.y),g=Math.atan2(i.x-s.x,i.y-s.y),w=Math.atan2(i.x-r.x,i.y-r.y),X=Math.atan2(i.x-u.x,i.y-u.y),m=4;return n>y||n<g?m=1:n>w&&n<y?m=2:n>g&&n<X&&(m=3),m};document.addEventListener("keydown",t=>{t.code==="ArrowLeft"&&(c.left=!0),t.code==="ArrowRight"&&(c.right=!0),t.code==="ArrowUp"&&(h==="START"&&(h="PLAYING"),c.up=!0),t.code==="KeyR"&&(c.reset=!0)});document.addEventListener("keyup",t=>{t.code==="ArrowLeft"&&(c.left=!1),t.code==="ArrowRight"&&(c.right=!1),t.code==="ArrowUp"&&(c.up=!1),t.code==="KeyR"&&(c.reset=!1)});const Q=()=>{p=p.filter(t=>!t.toDispose)},W=()=>{q.innerHTML=L};let M=16,R=t=>{const e=t-M;e&&(f.clearRect(0,0,d.width,d.height),j(),F(e),H(e),h=="PLAYING"&&(B.style.display="none",Q(),V(),p.length==1&&(x=x+1,console.log("next level"),C.innerHTML=x,v()),l.length==0&&(D===0?(h="OVER",T.style.display="flex"):(console.log("removing life "),h="START",D-=1,O.innerHTML=D,l.push({radius:15,positionX:a.startX+a.width*.5,positionY:a.startY-30,xDirection:0,yDirection:-1,speed:Y,color:"white",life:1,toDispose:!1})))),h=="OVER"&&c.reset&&location.reload(),I(),G(),W(),M=t),requestAnimationFrame(R)};R();
//# sourceMappingURL=index-HBHB-iYO.js.map
