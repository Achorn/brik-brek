(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();const Y="#f0dede",T="#cf3673",A="#748cbb",B=document.querySelector("#title-container"),q=document.querySelector("#game-over");document.querySelector("#game-over-title");const C=document.querySelector("#score"),N=document.querySelector("#lives"),I=document.querySelector("#level");let L=0,D=3,M=1,h={up:!1,left:!1,right:!1,reset:!1},G=65,f=document.querySelector("#my-canvas"),s=f.getContext("2d"),l=[],P=.45,p=[],c="START",u={entering:!1,Offset:0},_=t=>{if(u.entering)if(u.Offset<0){let e=t*.4;u.Offset+=e,p.forEach(i=>{i.id!="paddle"&&(i.startY=i.startY+e)})}else u.entering=!1};const v=()=>{for(let t=0;t<5;t++)for(let e=0;e<4;e++){let i=Math.random(),o=Math.random(),r=i<.333333?T:i<.66666?"#855c8c":A;p.push({startX:25+t*140,startY:G+e*50+u.Offset,width:100,height:30,toDispose:!1,id:t+e,color:r,power:o>.8?"ball":o>.7?"speed":o>.6?"paddle":""})}};v();let R=t=>({x:t.startX+t.width*.5,y:t.startY+t.height*.5}),F=()=>{p.forEach(t=>{if(s.fillStyle=t.color,s.fillRect(t.startX,t.startY,t.width,t.height),t.power){if(t.power=="ball"&&(s.beginPath(),s.arc(t.startX+t.width*.5,t.startY+t.height*.5,t.height*.3,0,2*Math.PI),s.fillStyle=Y,s.fill()),t.power=="speed"){let e=t.height*.3;s.beginPath(),s.beginPath(),s.moveTo(t.startX-t.width*.5+e+t.width-3,t.startY+t.height*.5),s.lineTo(t.startX+t.width*.5-e,t.startY+t.height*.5-e),s.lineTo(t.startX+t.width*.5-e,t.startY+t.height*.5+e),s.fillStyle=Y,s.fill()}t.power=="paddle"&&(s.fillStyle=t.color,s.fillStyle=Y,s.fillRect(t.startX+25,t.startY+10,t.width-50,t.height-20),s.fill())}})},H=t=>{if(t.power&&t.power=="ball"){let e=R(t),i={radius:15,positionX:e.x,positionY:e.y,xDirection:1,yDirection:-1,speed:P,color:t.color,life:1,toDispose:!1};l.push(i)}},d={startX:f.width*.5-150*.5,startY:f.height-50,width:150,height:20,toDispose:!1,color:A,id:"paddle"};p.push(d);const K=t=>{let e=0;h.left&&(e-=.5*t),h.right&&(e+=.5*t),d.startX=d.startX+e,d.startX<=0&&(d.startX=5),d.startX+d.width>=f.width&&(d.startX=f.width-d.width-5)};let E={radius:15,positionX:f.width/2,positionY:f.width/2,xDirection:0,yDirection:-1,speed:P,color:"white",life:1,toDispose:!1};E.positionY=f.height-80;l.push(E);let U=t=>{c=="START"?(l[0].positionX=d.startX+d.width*.5,l[0].positionY=d.startY-30):l.forEach(e=>V(e,t))},V=(t,e)=>{t.positionX+=t.speed*e*t.xDirection,t.positionY+=t.speed*e*t.yDirection,t.positionY-t.radius<=0&&(t.yDirection=Math.abs(t.yDirection)),t.positionX+t.radius>=f.width&&(t.xDirection=-Math.abs(t.xDirection)),t.positionX-t.radius<=0&&(t.xDirection=Math.abs(t.xDirection)),t.positionY-t.radius>f.height&&(t.toDispose=!0)},j=()=>{l.forEach(t=>W(t))},W=t=>{s.beginPath(),s.arc(t.positionX,t.positionY,t.radius,0,2*Math.PI),s.fillStyle=t.color,s.fill()};const z=()=>{l=l.filter(t=>!t.toDispose)},J=()=>{p.forEach(t=>{l.forEach(e=>{if(Q(t,e)){let i=Z(t,e);if(i==1&&(e.yDirection=1),i==2&&(e.xDirection=-1),i==3&&(e.xDirection=1),i==4&&(e.yDirection=-1),t.id!="paddle")H(t),t.toDispose=!0,L+=50;else{let o={start:t.startX,end:t.startX+t.width,center:t.startX+t.width*.5},r=e.positionX-o.start,a=o.center-o.start;(r-a)/t.width;let n=(r-a)/t.width;n=Math.max(-.3,n),n=Math.min(.3,n),n*=2,n*=90,n<=0?n+=90:n-=90;let g=n<=0?1:-1,y=Math.abs(n),m=1;const X=y*Math.PI/180,x=m*Math.sin(X),w=m*Math.cos(X);e.xDirection=w*g,e.yDirection=-x}}})})},Q=(t,e)=>{let i=R(t),o=i.x,r=i.y,a=e.positionX-o,n=e.positionY-t.startY,g=o+Math.max(Math.min(a,t.width/2),-t.width/2),y=r+Math.max(Math.min(n,t.height/2),-t.height/2);return Math.sqrt((e.positionX-g)**2+(e.positionY-y)**2)<=e.radius},Z=(t,e)=>{let i={x:t.startX+t.width*.5,y:t.startY+t.height*.5},o=Math.atan2(i.x-e.positionX,i.y-e.positionY),r={x:t.startX,y:t.startY+t.height},a={x:t.startX+t.width,y:t.startY+t.height},n={x:t.startX,y:t.startY},g={x:t.startX+t.width,y:t.startY},y=Math.atan2(i.x-r.x,i.y-r.y),m=Math.atan2(i.x-a.x,i.y-a.y),X=Math.atan2(i.x-n.x,i.y-n.y),x=Math.atan2(i.x-g.x,i.y-g.y),w=4;return o>y||o<m?w=1:o>X&&o<y?w=2:o>m&&o<x&&(w=3),w};document.addEventListener("keydown",t=>{t.code==="ArrowLeft"&&(h.left=!0),t.code==="ArrowRight"&&(h.right=!0),t.code==="ArrowUp"&&(c==="START"&&(c="PLAYING"),h.up=!0),t.code==="KeyR"&&(h.reset=!0)});document.addEventListener("keyup",t=>{t.code==="ArrowLeft"&&(h.left=!1),t.code==="ArrowRight"&&(h.right=!1),t.code==="ArrowUp"&&(h.up=!1),t.code==="KeyR"&&(h.reset=!1)});const $=()=>{p=p.filter(t=>!t.toDispose)},k=()=>{C.innerHTML=L};let S=16,O=t=>{const e=t-S;e&&(s.clearRect(0,0,f.width,f.height),J(),K(e),_(e),U(e),c=="PLAYING"&&(B.style.display="none",$(),z(),p.length==1&&(M=M+1,u.entering=!0,u.Offset=-400,I.innerHTML=M,v()),l.length==0&&(D===0?(c="OVER",q.style.display="flex"):(c="START",D-=1,N.innerHTML=D,l.push({radius:15,positionX:d.startX+d.width*.5,positionY:d.startY-30,xDirection:0,yDirection:-1,speed:P,color:"white",life:1,toDispose:!1})))),c=="OVER"&&h.reset&&location.reload(),F(),j(),k(),S=t),requestAnimationFrame(O)};O();
//# sourceMappingURL=index-DCw-GHf1.js.map
