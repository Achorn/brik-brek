(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const O="#cf3673",L="#748cbb",B=document.querySelector("#title-container"),T=document.querySelector("#game-over");document.querySelector("#game-over-title");const q=document.querySelector("#score"),C=document.querySelector("#lives"),N=document.querySelector("#level");let v=0,Y=3,X=1,f={up:!1,left:!1,right:!1,reset:!1},I=65,d=document.querySelector("#my-canvas"),h=d.getContext("2d"),c=[],M=.45,l=[],p="START",u={entering:!1,Offset:0},G=t=>{if(u.entering)if(u.Offset<0){let e=t*.4;u.Offset+=e,l.forEach(i=>{i.id!="paddle"&&(i.startY=i.startY+e)})}else u.entering=!1};const S=()=>{for(let t=0;t<5;t++)for(let e=0;e<5;e++){let i=Math.random(),n=i<.333333?O:i<.66666?"#855c8c":L;l.push({startX:25+t*140,startY:I+e*50+u.Offset,width:100,height:30,toDispose:!1,id:t+e,color:n,power:"ball"})}};S();let P=t=>({x:t.startX+t.width*.5,y:t.startY+t.height*.5}),_=()=>{l.forEach(t=>{h.fillStyle=t.color,h.fillRect(t.startX,t.startY,t.width,t.height)})},F=t=>{if(!t.power||X!=1)return;let e=P(t),i={radius:15,positionX:e.x,positionY:e.y,xDirection:1,yDirection:1,speed:M,color:t.color,life:1,toDispose:!1};c.push(i)},a={startX:d.width*.5-150*.5,startY:d.height-50,width:150,height:20,toDispose:!1,color:L,id:"paddle"};l.push(a);const H=t=>{let e=0;f.left&&(e-=.5*t),f.right&&(e+=.5*t),a.startX=a.startX+e,a.startX<=0&&(a.startX=5),a.startX+a.width>=d.width&&(a.startX=d.width-a.width-5)};let R={radius:15,positionX:d.width/2,positionY:d.width/2,xDirection:0,yDirection:-1,speed:M,color:"white",life:1,toDispose:!1};R.positionY=d.height-80;c.push(R);let K=t=>{p=="START"?(c[0].positionX=a.startX+a.width*.5,c[0].positionY=a.startY-30):c.forEach(e=>U(e,t))},U=(t,e)=>{t.positionX+=t.speed*e*t.xDirection,t.positionY+=t.speed*e*t.yDirection,t.positionY-t.radius<=0&&(t.yDirection=Math.abs(t.yDirection)),t.positionX+t.radius>=d.width&&(t.xDirection=-Math.abs(t.xDirection)),t.positionX-t.radius<=0&&(t.xDirection=Math.abs(t.xDirection)),t.positionY-t.radius>d.height&&(t.toDispose=!0)},V=()=>{c.forEach(t=>j(t))},j=t=>{h.beginPath(),h.arc(t.positionX,t.positionY,t.radius,0,2*Math.PI),h.fillStyle=t.color,h.fill()};const z=()=>{c=c.filter(t=>!t.toDispose)},J=()=>{l.forEach(t=>{c.forEach(e=>{if(Q(t,e)){let i=W(t,e);if(i==1&&(e.yDirection=1),i==2&&(e.xDirection=-1),i==3&&(e.xDirection=1),i==4&&(e.yDirection=-1),t.id!="paddle")F(t),t.toDispose=!0,v+=50;else{let n={start:t.startX,end:t.startX+t.width,center:t.startX+t.width*.5},r=e.positionX-n.start,s=n.center-n.start;(r-s)/t.width;let o=(r-s)/t.width;o=Math.max(-.3,o),o=Math.min(.3,o),o*=2,o*=90,o<=0?o+=90:o-=90;let y=o<=0?1:-1,g=Math.abs(o),m=1;const x=g*Math.PI/180,D=m*Math.sin(x),w=m*Math.cos(x);e.xDirection=w*y,e.yDirection=-D}}})})},Q=(t,e)=>{let i=P(t),n=i.x,r=i.y,s=e.positionX-n,o=e.positionY-t.startY,y=n+Math.max(Math.min(s,t.width/2),-t.width/2),g=r+Math.max(Math.min(o,t.height/2),-t.height/2);return Math.sqrt((e.positionX-y)**2+(e.positionY-g)**2)<=e.radius},W=(t,e)=>{let i={x:t.startX+t.width*.5,y:t.startY+t.height*.5},n=Math.atan2(i.x-e.positionX,i.y-e.positionY),r={x:t.startX,y:t.startY+t.height},s={x:t.startX+t.width,y:t.startY+t.height},o={x:t.startX,y:t.startY},y={x:t.startX+t.width,y:t.startY},g=Math.atan2(i.x-r.x,i.y-r.y),m=Math.atan2(i.x-s.x,i.y-s.y),x=Math.atan2(i.x-o.x,i.y-o.y),D=Math.atan2(i.x-y.x,i.y-y.y),w=4;return n>g||n<m?w=1:n>x&&n<g?w=2:n>m&&n<D&&(w=3),w};document.addEventListener("keydown",t=>{t.code==="ArrowLeft"&&(f.left=!0),t.code==="ArrowRight"&&(f.right=!0),t.code==="ArrowUp"&&(p==="START"&&(p="PLAYING"),f.up=!0),t.code==="KeyR"&&(f.reset=!0)});document.addEventListener("keyup",t=>{t.code==="ArrowLeft"&&(f.left=!1),t.code==="ArrowRight"&&(f.right=!1),t.code==="ArrowUp"&&(f.up=!1),t.code==="KeyR"&&(f.reset=!1)});const Z=()=>{l=l.filter(t=>!t.toDispose)},$=()=>{q.innerHTML=v};let A=16,E=t=>{const e=t-A;e&&(h.clearRect(0,0,d.width,d.height),J(),H(e),G(e),K(e),p=="PLAYING"&&(B.style.display="none",Z(),z(),l.length==1&&(X=X+1,u.entering=!0,u.Offset=-400,console.log("next level"),N.innerHTML=X,S()),c.length==0&&(Y===0?(p="OVER",T.style.display="flex"):(p="START",Y-=1,C.innerHTML=Y,c.push({radius:15,positionX:a.startX+a.width*.5,positionY:a.startY-30,xDirection:0,yDirection:-1,speed:M,color:"white",life:1,toDispose:!1})))),p=="OVER"&&f.reset&&location.reload(),_(),V(),$(),A=t),requestAnimationFrame(E)};E();
//# sourceMappingURL=index-OzDcCG5h.js.map
